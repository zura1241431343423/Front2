<div class="newly-added-container">
  <div class="header">
    <h2 class="title">
      <svg class="title-icon"
      
      xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M6 14q0 1.3.525 2.463t1.5 2.037Q8 18.375 8 18.275v-.225q0-.8.3-1.5t.875-1.275L12 12.5l2.825 2.775q.575.575.875 1.275t.3 1.5v.225q0 .1-.025.225q.975-.875 1.5-2.037T18 14q0-1.25-.462-2.363T16.2 9.65q-.5.325-1.05.488t-1.125.162q-1.55 0-2.688-1.025T10.026 6.75Q9.05 7.575 8.3 8.463t-1.263 1.8t-.774 1.862T6 14m6 1.3l-1.425 1.4q-.275.275-.425.625t-.15.725q0 .8.587 1.375T12 20t1.412-.575T14 18.05q0-.4-.15-.737t-.425-.613zM12 3v3.3q0 .85.588 1.425t1.437.575q.45 0 .838-.187t.687-.563L16 7q1.85 1.05 2.925 2.925T20 14q0 3.35-2.325 5.675T12 22t-5.675-2.325T4 14q0-3.225 2.162-6.125T12 3"/></svg>
      Popular Products
    </h2>
    <div class="navigation-controls">
      <button
        class="nav-btn prev-btn"
        (click)="scrollLeft()"
        [disabled]="!canScrollLeft"
        [class.disabled]="!canScrollLeft"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
        </svg>
      </button>
      <button
        class="nav-btn next-btn"
        (click)="scrollRight()"
        [disabled]="!canScrollRight"
        [class.disabled]="!canScrollRight"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
        </svg>
      </button>
    </div>
  </div>

  <div class="products-wrapper">
    <div
      #scrollContainer
      class="products-scroll-container"
      (scroll)="onScroll()"
    >
      <div class="products-grid">
        @if (isLoading) {
        <div class="loading-container">
          <div class="loading-spinner"></div>
          <p>Loading popular products...</p>
        </div>
        } @else if (popularProducts.length === 0) {
        <div class="empty-state">
          <p>No popular products found</p>
        </div>
        } @else { @for (product of popularProducts; track product.id) {
        <div class="product-card-wrapper">
          <app-card
            [product]="product"
            (ratingChanged)="onRatingChanged($event)"
          >
          </app-card>
        </div>
        } }
      </div>
    </div>
  </div>
</div>
